<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <link th:href="@{/css/product-detail.css}" rel="stylesheet">
    <link th:href="@{/css/navbar-top.css}" rel="stylesheet">

    <title th:text="${product.productName}"></title>
</head>
<body>
<div class="detail-page">
    <div th:replace="~{components/navbar-top :: navbar-top}"></div>
    <div class="detail-container">
        <div class="dp-product-img">
            <img th:src="${product.imageURL}" class="card-img-top" th:alt="${product.productName}">
        </div>

        <div class="dp-product-details">
            <div class="dp-product-name">
                <span class="dp-pr-cat" th:text="${product.category?.name}">Food</span>
                <h2 class="dp-pr-name" th:text="${product.productName}">Salad Italia</h2>
                <span class="dp-sale-count">Terjual 20+</span>
                <span class="dp-price">Rp[[${product.price}]]</span>
            </div>
            <div class="mb-4">
                <hr>
            </div>
            <p class="dp-description-title">Deskripsi</p>

            <div class="dp-product-desc" th:text="${product.description}">
            </div>
        </div>

        <div class="dp-form">
            <h3>Atur Variant dan Jumlah</h3>
            <form action="/add-to-cart" method="POST">
                <!-- Radio buttons for variants -->
                <div th:each="variant : ${variants}" class="form-check form-check-inline" style="cursor: pointer">
                    <input style="cursor: pointer" class="form-check-input" type="radio" name="variant"
                           th:id="'variant' + ${variant.variantId}"
                           th:value="${variant.variantId}">
                    <label style="cursor: pointer" class="form-check-label" th:for="'variant' + ${variant.variantId}"
                           th:text="${variant.name}"></label>
                </div>
                <!-- Hidden input field for productId -->
                <input type="hidden" name="productId" th:value="${product.productId}">
                <div class="mb-3">
                    <hr>
                </div>
                <!-- Quantity adjustment -->
                <div class="d-flex align-items-center justify-content-center">
                    <div class="d-flex p-0 flex-row align-items-center justify-content-center gap-3">
                        <div class="d-flex">
                            <button type="button" class="btn btn-primary btn-quantity border-0 px-3"
                                    style="background-color: #04d4f0" onclick="adjustQuantity(-1)">-
                            </button>
                        </div>
                        <input type="number" name="quantity" id="quantity" value="1" class="rounded">
                        <div class="d-flex">
                            <button type="button" class="btn btn-primary btn-quantity border-0 px-3"
                                    style="background-color: #04d4f0" onclick="adjustQuantity(1)">+
                            </button>
                        </div>
                    </div>
                </div>

                <!--Note Section-->
                <div class="note-section mt-3">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <h6 class="mb-0 fst-italic text-decoration-underline">Note</h6>
                        <button type="button" class="btn btn-link p-0" id="noteToggle"><i class="fas fa-pencil-alt"></i>
                        </button>
                    </div>
                    <div class="note-input" id="noteInput">
                        <textarea class="form-control" name="note" rows="2" placeholder="Add a note..."></textarea>
                    </div>
                </div>
                <!-- Add to cart button -->
                <div class="d-flex align-items-center justify-content-center mt-3">
                    <button type="submit" class="btn-custom w-100">Add To Cart</button>
                </div>
            </form>

        </div>
    </div>
</div>

<script>
    function adjustQuantity(change) {
        var quantityInput = document.getElementById("quantity");
        var currentQuantity = parseInt(quantityInput.value);
        var newQuantity = currentQuantity + change;
        if (newQuantity >= 1) {
            quantityInput.value = newQuantity;
        }
    }
</script>
<script>
    const noteInput = document.getElementById("noteInput");
    const noteToggle = document.getElementById("noteToggle");

    noteToggle.addEventListener("click", () => {
        noteInput.classList.toggle("expanded");
    });

</script>


<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js"
        integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa"
        crossorigin="anonymous"></script>
</body>
</html>