<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <link th:href="@{/css/home-product.css}" rel="stylesheet">
    <link th:href="@{/css/navbar-top.css}" rel="stylesheet">
    <title>Food Spring App by STARLINE</title>
</head>
<body>
<div class="main-page">
    <div th:replace="~{components/navbar-top :: navbar-top}"></div>
    <div class="home-container">
        <div class="filter-category">
            <h3>Category</h3>
            <form th:action="@{/admin}" class="list-group">
                <label class="list-group-item">
                    <input class="form-check-input me-1" type="checkbox" value="">
                    Cake
                </label>
                <label class="list-group-item">
                    <input class="form-check-input me-1" type="checkbox" value="">
                    Dessert
                </label>
                <label class="list-group-item">
                    <input class="form-check-input me-1" type="checkbox" value="">
                    Appetizer
                </label>
                <label class="list-group-item">
                    <input class="form-check-input me-1" type="checkbox" value="">
                    Soup
                </label>
                <label class="list-group-item">
                    <input class="form-check-input me-1" type="checkbox" value="">
                    Curry
                </label>
                <label class="list-group-item">
                    <input class="form-check-input me-1" type="checkbox" value="">
                    Meat
                </label>
                <label class="list-group-item">
                    <input class="form-check-input me-1" type="checkbox" value="">
                    Coffee
                </label>
                <label class="list-group-item">
                    <input class="form-check-input me-1" type="checkbox" value="">
                    Milkshake
                </label>
                <button type="submit" class="btn-filter">Apply Filter</button>
            </form>
        </div>
        <div class="right-section">
            <div class="sort-container dropdown">
                <div class="btn-custom dropdown-toggle" id="dropdownMenuButton1" data-bs-toggle="dropdown"
                     aria-expanded="false">
                    <p th:text="${selectedSort == null} ? 'Sort By' : ${selectedSort}"></p>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                        <li><a th:classappend="${selectedSort == 'Latest'}? 'active' : ''" class="dropdown-item" href="?sortBy=Latest" th:attr="data-sortBy='Latest'" th:onclick="setSelectedSort(this)">Latest</a></li>
                        <li><a th:classappend="${selectedSort == 'Higher Price'}? 'active' : ''" class="dropdown-item" href="?sortBy=Higher Price" th:attr="data-sortBy='Higher Price'" th:onclick="setSelectedSort(this)">Higher Price</a></li>
                        <li><a th:classappend="${selectedSort == 'Lower Price'}? 'active' : ''" class="dropdown-item" href="?sortBy=Lower Price" th:attr="data-sortBy='Lower Price'" th:onclick="setSelectedSort(this)">Lower Price</a></li>
                    </ul>
                </div>
            </div>
            <div class="product-container">
                <div th:each="product : ${products}">
                    <div th:replace="~{components/product-card :: product-card(product=${product})}"></div>
                </div>
            </div>

        </div>
    </div>
</div>

<script>
     function setSelectedSort(link) {
        var selectedSortValue = link.getAttribute('data-sortBy');
        link.classList.add('active');
        var dropdownButton = document.getElementById('dropdownMenuButton1');

        var newUrl = new URL(window.location.href);
        newUrl.searchParams.set('sortBy', selectedSortValue);
        window.location.href = newUrl.toString();
    }
    function redirectToProductDetail(productId) {
    const productDetailUrl = `/product/detail?id=${productId}`;
    window.location.href = productDetailUrl;
  }



</script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js"
        integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa"
        crossorigin="anonymous"></script>
</body>
</html>